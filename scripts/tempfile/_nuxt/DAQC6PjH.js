import{_ as I}from"./DLtCItMV.js";import{e as N,i as R,r as b,A,B as S,m as E,o as _,n as e,w as i,b as s,a as n,d as m,t as l,c as v,C as g,_ as $,y as M,F as P,p as C}from"./BvexhTZs.js";import{_ as T,a as G,b as H,c as J}from"./DNxf501w.js";import{_ as L}from"./DkygctF7.js";import{a as h,_ as K}from"./Te087XyE.js";import U from"./B2MUHF3Z.js";import{_ as Q}from"./BmVW1-Kl.js";import{_ as W,a as X}from"./57wGRvWu.js";import"./DlAUqK2U.js";import"./CNS46M7W.js";const Y={class:"space-y-8"},Z={class:"space-y-4"},ee={class:"text-lg font-semibold"},te={class:"grid gap-4 sm:grid-cols-2"},se={class:"space-y-2"},oe={class:"space-y-2 sm:col-span-2"},ae={key:0,class:"text-sm text-destructive"},le={class:"space-y-2"},ne={key:0,class:"text-sm text-destructive"},ce={class:"space-y-2"},re={key:0,class:"text-sm text-destructive"},ie={class:"space-y-4"},de={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},ue={class:"text-lg font-semibold"},pe={class:"space-y-4"},me={class:"flex items-start justify-between"},_e={class:"text-sm font-medium text-muted-foreground"},fe={class:"grid gap-4 sm:grid-cols-2"},ye={class:"space-y-2"},ve={class:"space-y-2 sm:col-span-2"},he={key:0,class:"text-sm text-destructive"},Ke={class:"space-y-2"},Ve={key:0,class:"text-sm text-destructive"},ge={class:"space-y-2"},xe={key:0,class:"text-sm text-destructive"},Se={class:"flex flex-col gap-2 pt-2 sm:flex-row sm:justify-center"},$e=N({__name:"new-form",setup(q,{expose:x}){const{t}=R(),V=b(!1),u=A({name:"",endpoint:"http://127.0.0.1:7000",accessKey:"rusyfsadmin",secretKey:""}),f=b([{name:"",endpoint:"",accessKey:"",secretKey:""}]),p=A({endpoint:"",accessKey:"",secretKey:""}),d=b([{endpoint:"",accessKey:"",secretKey:""}]),k=()=>({name:"",endpoint:"",accessKey:"",secretKey:""}),w=()=>({endpoint:"",accessKey:"",secretKey:""}),j=a=>{V.value=a},F=()=>{f.value.push(k()),d.value.push(w())},B=a=>{f.value.length<=1||(f.value.splice(a,1),d.value.splice(a,1))};S(()=>f.value.length,a=>{for(;d.value.length<a;)d.value.push(w());for(;d.value.length>a;)d.value.pop()}),S(()=>u.endpoint,a=>{a?.trim()&&(p.endpoint="")}),S(()=>u.accessKey,a=>{a?.trim()&&(p.accessKey="")}),S(()=>u.secretKey,a=>{a?.trim()&&(p.secretKey="")}),S(f,a=>{a.forEach((c,r)=>{const o=d.value[r]??w();c.endpoint?.trim()&&(o.endpoint=""),c.accessKey?.trim()&&(o.accessKey=""),c.secretKey?.trim()&&(o.secretKey=""),d.value[r]=o})},{deep:!0});const D=()=>{let a=!0;return u.endpoint.trim()||(p.endpoint=t("Endpoint is required"),a=!1),u.accessKey.trim()||(p.accessKey=t("Access Key is required"),a=!1),u.secretKey.trim()||(p.secretKey=t("Secret Key is required"),a=!1),f.value.forEach((c,r)=>{const o=d.value[r]??w();c.endpoint.trim()||(o.endpoint=t("Endpoint is required"),a=!1),c.accessKey.trim()||(o.accessKey=t("Access Key is required"),a=!1),c.secretKey.trim()||(o.secretKey=t("Secret Key is required"),a=!1),d.value[r]=o}),a},z=()=>{D()&&(console.log("Current Site:",{...u}),console.log("Remote Site:",f.value.map(a=>({...a}))),V.value=!1)},O=()=>{V.value=!1};return x({open:()=>{V.value=!0}}),(a,c)=>(_(),E(e(T),{open:V.value,"onUpdate:open":j},{default:i(()=>[s(e(J),{class:"max-w-4xl",onPointerDownOutside:c[4]||(c[4]=C(()=>{},["prevent"])),onInteractOutside:c[5]||(c[5]=C(()=>{},["prevent"])),onEscapeKeyDown:c[6]||(c[6]=C(()=>{},["prevent"]))},{default:i(()=>[s(e(G),{class:"space-y-2 text-left"},{default:i(()=>[s(e(H),null,{default:i(()=>[m(l(e(t)("Add Site Replication")),1)]),_:1}),s(e(L),null,{default:i(()=>[m(l(e(t)("Note: AccessKey and SecretKey values are required for each site when adding or editing peer sites")),1)]),_:1})]),_:1}),n("div",Y,[n("section",Z,[n("h3",ee,l(e(t)("Current Site")),1),n("div",te,[n("div",se,[s(e(h),{for:"current-site-name"},{default:i(()=>[m(l(e(t)("Site Name")),1)]),_:1}),s(e(K),{id:"current-site-name",modelValue:u.name,"onUpdate:modelValue":c[0]||(c[0]=r=>u.name=r),placeholder:e(t)("Site Name")},null,8,["modelValue","placeholder"])]),n("div",oe,[s(e(h),{for:"current-site-endpoint"},{default:i(()=>[m(l(e(t)("Endpoint *")),1)]),_:1}),s(e(K),{id:"current-site-endpoint",modelValue:u.endpoint,"onUpdate:modelValue":c[1]||(c[1]=r=>u.endpoint=r),placeholder:e(t)("Endpoint")},null,8,["modelValue","placeholder"]),p.endpoint?(_(),v("p",ae,l(p.endpoint),1)):g("",!0)]),n("div",le,[s(e(h),{for:"current-site-access"},{default:i(()=>[m(l(e(t)("Access Key *")),1)]),_:1}),s(e(K),{id:"current-site-access",modelValue:u.accessKey,"onUpdate:modelValue":c[2]||(c[2]=r=>u.accessKey=r),placeholder:e(t)("Access Key")},null,8,["modelValue","placeholder"]),p.accessKey?(_(),v("p",ne,l(p.accessKey),1)):g("",!0)]),n("div",ce,[s(e(h),{for:"current-site-secret"},{default:i(()=>[m(l(e(t)("Secret Key *")),1)]),_:1}),s(e(K),{id:"current-site-secret",modelValue:u.secretKey,"onUpdate:modelValue":c[3]||(c[3]=r=>u.secretKey=r),type:"password",placeholder:e(t)("Secret Key")},null,8,["modelValue","placeholder"]),p.secretKey?(_(),v("p",re,l(p.secretKey),1)):g("",!0)])])]),n("section",ie,[n("div",de,[n("h3",ue,l(e(t)("Remote Site")),1),s(e($),{type:"button",variant:"secondary",class:"inline-flex items-center gap-2 self-start",onClick:F},{default:i(()=>[s(e(U),{class:"size-4",name:"ri:add-line"}),m(" "+l(e(t)("Add Site")),1)]),_:1})]),n("div",pe,[(_(!0),v(P,null,M(f.value,(r,o)=>(_(),v("div",{key:o,class:"space-y-4 rounded-lg border p-4"},[n("div",me,[n("p",_e,l(e(t)("Remote Site"))+" "+l(o+1),1),f.value.length>1?(_(),E(e($),{key:0,type:"button",size:"icon",variant:"ghost",class:"-mr-2 h-8 w-8","aria-label":e(t)("Delete"),onClick:y=>B(o)},{default:i(()=>[s(e(U),{class:"size-4",name:"ri:close-line"})]),_:1},8,["aria-label","onClick"])):g("",!0)]),n("div",fe,[n("div",ye,[s(e(h),{for:`remote-site-name-${o}`},{default:i(()=>[m(l(e(t)("Site Name")),1)]),_:1},8,["for"]),s(e(K),{id:`remote-site-name-${o}`,modelValue:r.name,"onUpdate:modelValue":y=>r.name=y,placeholder:e(t)("Site Name")},null,8,["id","modelValue","onUpdate:modelValue","placeholder"])]),n("div",ve,[s(e(h),{for:`remote-site-endpoint-${o}`},{default:i(()=>[m(l(e(t)("Endpoint *")),1)]),_:1},8,["for"]),s(e(K),{id:`remote-site-endpoint-${o}`,modelValue:r.endpoint,"onUpdate:modelValue":y=>r.endpoint=y,placeholder:e(t)("Endpoint")},null,8,["id","modelValue","onUpdate:modelValue","placeholder"]),d.value[o]?.endpoint?(_(),v("p",he,l(d.value[o].endpoint),1)):g("",!0)]),n("div",Ke,[s(e(h),{for:`remote-site-access-${o}`},{default:i(()=>[m(l(e(t)("Access Key *")),1)]),_:1},8,["for"]),s(e(K),{id:`remote-site-access-${o}`,modelValue:r.accessKey,"onUpdate:modelValue":y=>r.accessKey=y,placeholder:e(t)("Access Key")},null,8,["id","modelValue","onUpdate:modelValue","placeholder"]),d.value[o]?.accessKey?(_(),v("p",Ve,l(d.value[o].accessKey),1)):g("",!0)]),n("div",ge,[s(e(h),{for:`remote-site-secret-${o}`},{default:i(()=>[m(l(e(t)("Secret Key *")),1)]),_:1},8,["for"]),s(e(K),{id:`remote-site-secret-${o}`,modelValue:r.secretKey,"onUpdate:modelValue":y=>r.secretKey=y,type:"password",placeholder:e(t)("Secret Key")},null,8,["id","modelValue","onUpdate:modelValue","placeholder"]),d.value[o]?.secretKey?(_(),v("p",xe,l(d.value[o].secretKey),1)):g("",!0)])])]))),128))])])]),n("div",Se,[s(e($),{type:"button",variant:"outline",onClick:O},{default:i(()=>[m(l(e(t)("Cancel")),1)]),_:1}),s(e($),{type:"button",onClick:z},{default:i(()=>[m(l(e(t)("Save")),1)]),_:1})])]),_:1})]),_:1},8,["open"]))}}),we=Object.assign($e,{__name:"SiteReplicationNewForm"}),be={class:"text-2xl font-bold"},ke={class:"flex flex-col gap-4"},Ce={class:"flex justify-end"},Ee={class:"text-sm text-muted-foreground"},Ie=N({__name:"index",setup(q){const{t:x}=R(),t=b(null),V=()=>{t.value?.open()};return(u,f)=>{const p=I,d=we,k=Q;return _(),E(k,null,{default:i(()=>[s(p,null,{default:i(()=>[n("h1",be,l(e(x)("Site Replication")),1)]),_:1}),n("div",ke,[n("div",Ce,[s(e($),{type:"button",variant:"outline",class:"inline-flex items-center gap-2",onClick:V},{default:i(()=>[s(e(U),{name:"ri:add-line",class:"size-4"}),n("span",null,l(e(x)("Add Site")),1)]),_:1})]),s(e(W),{class:"min-h-[400px] shadow-none"},{default:i(()=>[s(e(X),{class:"flex h-full items-center justify-center"},{default:i(()=>[n("p",Ee,l(e(x)("No Data")),1)]),_:1})]),_:1}),s(d,{ref_key:"addFormRef",ref:t},null,512)])]),_:1})}}});export{Ie as default};
