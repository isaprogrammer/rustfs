import{e as H,i as j,k as G,r as C,A as Z,x as E,m as P,o as S,n as e,w as s,a as u,c as B,F as q,y as Y,t as d,b as l,C as ee,d as f,_ as K,B as ae,K as le,L as A}from"./BvexhTZs.js";import $ from"./B2MUHF3Z.js";import{_ as te}from"./DLtCItMV.js";import{_ as k}from"./Te087XyE.js";import{_ as se}from"./CdtAKlFY.js";import{a as x,b as T,_ as V}from"./CX0wwNc8.js";import{_ as oe}from"./QhSbJoSr.js";import{_ as D}from"./DzwEWf_k.js";import{M as Q}from"./D6QIHz9A.js";import{u as W}from"./BeC7AbfF.js";import{_ as ne}from"./BmVW1-Kl.js";import{u as re,D as ce}from"./BQKrPI31.js";import"./DlAUqK2U.js";import"./DNxf501w.js";import"./CNS46M7W.js";import"./DkygctF7.js";import"./CzQd9PUz.js";import"./6l0Pl64a.js";import"./CUw6zPDB.js";import"./k0-rRQS5.js";import"./CjRf5-Eg.js";import"./CHIgUVhi.js";import"./Baq5sz8T.js";import"./DW7TBzO-.js";import"./DUVp9UZ0.js";import"./CLsMh9cr.js";const ie="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20class='min-icon'%20fill='currentcolor'%20viewBox='0%200%2033.055%2039.954'%3e%3cpath%20id='Trazado_6934'%20data-name='Trazado%206934'%20d='M2.663,53.686,0,55.018V78.391l2.663,1.324.016-.019V53.7l-.016-.018'%20transform='translate(0%20-46.754)'%20fill='%238c3123'%3e%3c/path%3e%3cpath%20id='Trazado_6935'%20data-name='Trazado%206935'%20d='M34.876,76.323,20.624,79.715V53.686L34.876,57V76.323'%20transform='translate(-17.961%20-46.754)'%20fill='%23e05243'%3e%3c/path%3e%3cpath%20id='Trazado_6936'%20data-name='Trazado%206936'%20d='M81.178,125.086l6.045.77.038-.088.034-9.913-.072-.077-6.045.758v8.55'%20transform='translate(-70.696%20-100.829)'%20fill='%238c3123'%3e%3c/path%3e%3cpath%20id='Trazado_6937'%20data-name='Trazado%206937'%20d='M128,76.361l13.864,3.362.022-.035V53.709l-.022-.023L128,57.043V76.361'%20transform='translate(-111.469%20-46.754)'%20fill='%238c3123'%3e%3c/path%3e%3cpath%20id='Trazado_6938'%20data-name='Trazado%206938'%20d='M134.043,125.086l-6.047.77V115.778l6.047.758v8.55'%20transform='translate(-111.469%20-100.829)'%20fill='%23e05243'%3e%3c/path%3e%3cpath%20id='Trazado_6939'%20data-name='Trazado%206939'%20d='M93.27,78.958l-6.047,1.1-6.045-1.1,6.038-1.583,6.055,1.583'%20transform='translate(-70.696%20-67.384)'%20fill='%235e1f18'%3e%3c/path%3e%3cpath%20id='Trazado_6940'%20data-name='Trazado%206940'%20d='M93.27,212.319l-6.047-1.109-6.045,1.109L87.216,214l6.054-1.685'%20transform='translate(-70.696%20-183.938)'%20fill='%23f2b0a9'%3e%3c/path%3e%3cpath%20id='Trazado_6941'%20data-name='Trazado%206941'%20d='M81.178,11.573l6.045-1.5.049-.015V.04L87.223,0,81.178,3.023v8.55'%20transform='translate(-70.696)'%20fill='%238c3123'%3e%3c/path%3e%3cpath%20id='Trazado_6942'%20data-name='Trazado%206942'%20d='M134.043,11.573,128,10.077V0l6.047,3.023v8.55'%20transform='translate(-111.469)'%20fill='%23e05243'%3e%3c/path%3e%3cpath%20id='Trazado_6943'%20data-name='Trazado%206943'%20d='M87.219,231.378l-6.046-3.022v-8.55l6.046,1.5.089.1-.024,9.8-.065.174'%20transform='translate(-70.692%20-191.424)'%20fill='%238c3123'%3e%3c/path%3e%3cpath%20id='Trazado_6944'%20data-name='Trazado%206944'%20d='M128,231.378l6.046-3.022v-8.55L128,221.3v10.077'%20transform='translate(-111.469%20-191.424)'%20fill='%23e05243'%3e%3c/path%3e%3cpath%20id='Trazado_6945'%20data-name='Trazado%206945'%20d='M235.367,53.686l2.664,1.332V78.391l-2.664,1.331V53.686'%20transform='translate(-204.976%20-46.754)'%20fill='%23e05243'%3e%3c/path%3e%3c/svg%3e",de="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20class='min-icon'%20fill='currentcolor'%20viewBox='0%200%2024.858%2050.321'%3e%3cpath%20id='rustfs-logo-color'%20d='M50.1,20.478q-1.908-3.154-3.826-6.3c-.664-1.088-1.339-2.171-2.012-3.254l-.266-.393a4.682,4.682,0,0,0-6-1.913,4.208,4.208,0,0,0-1.936,5.674,10.029,10.029,0,0,0,1.714,2.129c1.924,2.044,3.91,4.031,5.818,6.089a6.008,6.008,0,0,1-2.092,9.664l-.128.052V22.652A31.007,31.007,0,0,0,32.4,29.6a30.255,30.255,0,0,0-7.034,13.992l6.481-3.3c2.155-1.1,4.295-2.172,6.532-3.308V55.447l2.984,3.027V35.425s.068-.032.292-.152a24.676,24.676,0,0,0,2.614-1.448,8.834,8.834,0,0,0,1.3-13.358c-2.216-2.318-4.443-4.626-6.656-6.946a1.424,1.424,0,0,1,0-2.128,1.47,1.47,0,0,1,2.138.12c.308.311,2.386,2.506,3.127,3.283q2.808,2.941,5.625,5.872a4.005,4.005,0,0,0,.311.266l.117-.069A1.864,1.864,0,0,0,50.1,20.478ZM38.375,33.551a.538.538,0,0,1-.273.364c-1.186.629-2.382,1.241-3.577,1.855C33.109,36.5,31.69,37.223,30.17,38a28.176,28.176,0,0,1,8.16-10.112l.053-.044C38.386,29.7,38.392,31.7,38.375,33.551Z'%20transform='translate(-25.369%20-8.153)'%20fill='%23c72c48'%3e%3c/path%3e%3c/svg%3e",ue="data:image/svg+xml,%3csvg%20t='1744878929152'%20class='icon'%20viewBox='0%200%201653%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='1891'%20data-spm-anchor-id='a313x.search_index.0.i4.d0653a818gbhhr'%20width='200'%20height='200'%3e%3cpath%20d='M295.633488%20783.632817a74.898216%2074.898216%200%200%201-59.720604-72.58858v-399.237188a77.537801%2077.537801%200%200%201%2059.720604-72.58858l370.696679-80.34236%2038.933874-158.870005H274.846759A272.86707%20272.86707%200%200%200%200.164974%20272.873174v471.825768a276.661473%20276.661473%200%200%200%20274.681785%20274.846759h430.417282l-38.933874-158.210109zM1374.233793%200.006104H940.517029l39.593771%20158.870005%20370.696679%2080.34236a75.06319%2075.06319%200%200%201%2059.720604%2072.58858v399.237188a77.867749%2077.867749%200%200%201-59.720604%2072.58858l-370.696679%2080.34236-39.593771%20158.870005H1374.233793a275.011733%20275.011733%200%200%200%20275.671629-275.506655V272.873174A276.166551%20276.166551%200%200%200%201374.233793%200.006104z'%20fill='%23F76E05'%20p-id='1892'%3e%3c/path%3e%3cpath%20d='M666.330167%20490.638913h316.255244v38.933875H666.330167z'%20fill='%23F76E05'%20p-id='1893'%3e%3c/path%3e%3c/svg%3e",pe=""+new URL("tenxunyun.C26T3hJp.svg",import.meta.url).href,me="data:image/svg+xml,%3csvg%20t='1744879150545'%20class='icon'%20viewBox='0%200%201382%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='5020'%20width='200'%20height='200'%3e%3cpath%20d='M587.001106%200.138043a236.743057%20236.743057%200%200%200-179.455379%2083.9299c-70.263683%2096.629819-19.187921%20232.739822%2019.187921%20310.319763s210.791049%20355.32165%20217.141009%20361.671609%2012.837962%206.488002%2012.837961%200%2019.049879-413.437584%206.34996-510.757616A1387.742249%201387.742249%200%200%200%20587.001106%200.138043z%20m-376.856296%20187.185764c-12.837962%200-102.289566%2096.629819-115.127527%20180.973847s31.88784%20148.671879%20134.177406%20219.625775C337.834215%20665.365328%20587.001106%20800.785117%20593.627151%20794.849286c6.211917-12.976004-95.801564-193.259639-185.391211-329.645727S222.84473%20187.323807%20210.14481%20187.323807z%20m31.887841%20827.151254c76.613642%2032.301968%20197.953087-45.277972%20229.840927-64.603937l89.589647-64.603936-434.558102%2012.837962a331.992451%20331.992451%200%200%200%20115.127528%20116.369911z%20m12.699919-355.32165C178.118927%20620.225398%2018.541683%20529.807495%2012.053681%20529.807495s-31.88784%20116.369911%2019.187921%20200.437854%20147.015368%20110.434079%20191.603128%20116.369911c51.213804%206.34996%20345.106498%206.34996%20345.106497%200-6.488002-6.626045-236.605015-148.809922-313.218657-187.461849zM970.345404%2083.9299A237.295228%20237.295228%200%200%200%20791.580238%200.138043a1026.622809%201026.622809%200%200%200-70.263683%20239.089781c-12.837962%2096.629819%206.34996%20510.757617%206.349959%20510.757617%200%206.34996%206.211917%206.34996%2012.699919%200s185.253168-291.269884%20217.141009-362.22378%2082.825559-207.063899%2012.837962-303.693718z%20m402.532218%20445.877595c-6.34996%200-165.651119%2090.417902-242.816931%20129.345916S823.468078%20840.127258%20817.118119%20846.61526c0%206.34996%20293.892693%206.34996%20345.106497%200%2044.725802-6.488002%20140.527366-32.440011%20191.603128-116.369911%2044.725802-84.067943%2019.187921-200.437854%2019.187921-200.437854zM906.43168%20949.871124c31.88784%2019.464006%20153.365328%2096.629819%20229.97897%2064.603937a266.008088%20266.008088%200%200%200%20114.851443-122.857914l-434.42006-12.837961zM1283.840146%20368.297654c-6.211917-84.067943-102.289566-180.973847-114.989485-180.973847s-121.339445%20142.183877-204.441089%20277.879752S778.604233%20781.873281%20785.092236%20794.849286s255.516851-129.345915%20364.018333-207.063899c102.289566-70.953896%20140.665408-129.207873%20134.177407-219.625775z'%20fill='%23EA020A'%20p-id='5021'%3e%3c/path%3e%3c/svg%3e",fe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20class='min-icon'%20fill='currentcolor'%20viewBox='0%200%2047.137%2036.516'%3e%3cg%20id='azure-logo-color'%20transform='translate(-437.603%20-471.382)'%3e%3cg%20id='layer1-1'%20transform='translate(437.603%20471.382)'%3e%3cpath%20id='path21'%20d='M459.411,505.944c6.055-1.07,11.056-1.953,11.115-1.965l.1-.024-5.717-6.8c-3.143-3.74-5.717-6.815-5.717-6.831,0-.032,5.9-16.291,5.936-16.347.012-.019,4.03,6.919,9.738,16.812,5.347,9.266,9.755,16.9,9.8,16.975l.075.132-18.168,0-18.169,0S459.411,505.944,459.411,505.944ZM437.6,503.868c0-.008,2.693-4.686,5.987-10.391l5.987-10.375,6.978-5.856c3.839-3.219,6.986-5.86,7-5.864a1.448,1.448,0,0,1-.112.282c-.075.159-3.485,7.471-7.574,16.247l-7.44,15.957-5.41.008C440.037,503.884,437.6,503.88,437.6,503.868Z'%20transform='translate(-437.603%20-471.382)'%20fill='%232a94dc'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/svg%3e",ge="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20class='min-icon'%20fill='currentcolor'%20viewBox='0%200%2042.239%2033.998'%3e%3cg%20id='google-cloud-logo-color'%20transform='translate(-526%20-141)'%3e%3cg%20id='Grupo_1820'%20data-name='Grupo%201820'%20transform='translate(526%20141)'%3e%3cpath%20id='Trazado_6946'%20data-name='Trazado%206946'%20d='M78,40.648h1.288l3.671-3.671.18-1.559A16.5,16.5,0,0,0,56.295,43.47a1.988,1.988,0,0,1,1.288-.076l7.343-1.212s.373-.619.568-.581a9.159,9.159,0,0,1,12.535-.953Z'%20transform='translate(-51.201%20-31.287)'%20fill='%23ea4335'%3e%3c/path%3e%3cpath%20id='Trazado_6947'%20data-name='Trazado%206947'%20d='M238.1,84.8a16.527,16.527,0,0,0-4.985-8.037l-5.152,5.152a9.161,9.161,0,0,1,3.362,7.267V90.1a4.587,4.587,0,0,1,0,9.173h-9.173l-.915.928v5.5l.915.915h9.173A11.932,11.932,0,0,0,238.1,84.8Z'%20transform='translate(-201.103%20-72.617)'%20fill='%234285f4'%3e%3c/path%3e%3cpath%20id='Trazado_6948'%20data-name='Trazado%206948'%20d='M12.273,142.319a11.928,11.928,0,0,0-7.2,21.384l5.319-5.319a4.586,4.586,0,1,1,6.067-6.067L21.779,147a11.9,11.9,0,0,0-9.505-4.678Z'%20transform='translate(-0.415%20-132.197)'%20fill='%23fbbc05'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/svg%3e",ve="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='70'%20height='30'%20fill='none'%20viewBox='0%200%2070%2030'%20style='width:204px;height:30px'%3e%3cg%20clip-path='url(%23a)'%3e%3cpath%20fill='%23FBAD41'%20d='M52.688%2013.028c-.22%200-.437.008-.654.015a.297.297%200%200%200-.102.024.365.365%200%200%200-.236.255l-.93%203.249c-.401%201.397-.252%202.687.422%203.634.618.876%201.646%201.39%202.894%201.45l5.045.306c.15.008.28.08.359.199a.492.492%200%200%201%20.051.434.64.64%200%200%201-.547.426l-5.242.306c-2.848.132-5.912%202.456-6.987%205.29l-.378%201a.28.28%200%200%200%20.248.382h18.054a.48.48%200%200%200%20.464-.35%2013.12%2013.12%200%200%200%20.48-3.54c0-7.22-5.789-13.072-12.933-13.072'%3e%3c/path%3e%3cpath%20fill='%23F6821F'%20d='m44.808%2029.578.334-1.175c.402-1.397.253-2.687-.42-3.634-.62-.876-1.647-1.39-2.896-1.45l-23.665-.306a.467.467%200%200%201-.374-.199.492.492%200%200%201-.052-.434.64.64%200%200%201%20.552-.426l23.886-.306c2.836-.131%205.9-2.456%206.975-5.29l1.362-3.6a.914.914%200%200%200%20.04-.477C48.998%205.259%2042.79%200%2035.368%200c-6.842%200-12.647%204.462-14.73%2010.665a6.92%206.92%200%200%200-4.911-1.374c-3.28.33-5.92%203.002-6.246%206.318a7.148%207.148%200%200%200%20.18%202.472c-5.36.16-9.66%204.598-9.66%2010.052%200%20.493.035.979.106%201.453a.46.46%200%200%200%20.457.402h43.704a.57.57%200%200%200%20.54-.418'%3e%3c/path%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='a'%3e%3cpath%20fill='%23FFF'%20d='M0%200h204v30H0z'%3e%3c/path%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",_e={class:"space-y-6"},he={key:0,class:"grid grid-cols-1 gap-4 md:grid-cols-2"},ye=["onClick"],be={class:"flex items-center gap-3 p-4"},xe=["src"],Te={class:"text-base font-semibold"},Ve={class:"text-sm text-muted-foreground"},ze={key:1,class:"space-y-5"},we={class:"flex items-center gap-3 p-4"},ke=["src"],Ce={class:"text-sm text-muted-foreground"},Se={class:"text-base font-semibold"},Me={class:"space-y-4"},Ae={class:"flex justify-end gap-2"},Ke=H({__name:"new-form",emits:["search"],setup(R,{expose:c,emit:g}){const{t}=j(),F=W(),v=G(),b=[{label:t("RustFS"),value:"rustfs",iconUrl:D,description:t("RustFS built-in cold storage")},{label:t("Minio"),value:"minio",iconUrl:de,description:t("External MinIO tier")},{label:t("AWS S3"),value:"s3",iconUrl:ie,description:t("Standard AWS S3 tier")},{label:t("Aliyun OSS"),value:"aliyun",iconUrl:ue,description:t("Alibaba Cloud Object Storage Service")},{label:t("Tencent COS"),value:"tencent",iconUrl:pe,description:t("Tencent Cloud Object Storage")},{label:t("Huawei OBS"),value:"huaweicloud",iconUrl:me,description:t("Huawei Cloud Object Storage Service")},{label:t("Azure Blob"),value:"azure",iconUrl:fe,description:t("Microsoft Azure Blob Storage")},{label:t("Google Cloud Storage"),value:"gcs",iconUrl:ge,description:t("Google Cloud Storage")},{label:t("Cloudflare R2"),value:"r2",iconUrl:ve,description:t("Cloudflare R2 Storage")}],m=C(!1),M=C(!1),p=C(D),a=Z({type:"",name:"",endpoint:"",accesskey:"",secretkey:"",creds:"",bucket:"",prefix:"",region:"",storageclass:"STANDARD"}),z=E(()=>a.type==="gcs"),w=Z({name:""}),_=i=>{a.type=i,p.value=b.find(r=>r.value===i)?.iconUrl||D},h=()=>{a.type="",p.value=D,U()},y=()=>{a.name=a.name.replace(/[^A-Za-z0-9_]/g,"").toUpperCase()},U=()=>{a.name="",a.endpoint="",a.accesskey="",a.secretkey="",a.creds="",a.bucket="",a.prefix="",a.region="",a.storageclass="STANDARD",w.name=""},N=()=>a.type?a.name?(w.name="",!0):(w.name=t("Please enter rule name"),!1):(v.error(t("Please select rule type")),!1),I=g,O=async()=>{if(N()){M.value=!0;try{const i={name:a.name,endpoint:a.endpoint,bucket:a.bucket,prefix:a.prefix,region:a.region,storageClass:a.storageclass};z.value?i.creds=a.creds:(i.accessKey=a.accesskey,i.secretKey=a.secretkey);const r={type:a.type,[a.type]:i};await F.addTiers(r),v.success(t("Create Success")),I("search"),o()}catch(i){v.error(i?.message||t("Create Failed"))}finally{M.value=!1}}},o=()=>{m.value=!1,M.value=!1,U()};return c({open:()=>{m.value=!0,U()}}),(i,r)=>(S(),P(Q,{modelValue:m.value,"onUpdate:modelValue":r[9]||(r[9]=n=>m.value=n),title:e(t)("Add Tier"),size:"lg","close-on-backdrop":!1},{footer:s(()=>[u("div",Ae,[l(e(K),{variant:"outline",onClick:o},{default:s(()=>[f(d(e(t)("Cancel")),1)]),_:1}),l(e(K),{variant:"default",disabled:!a.type,loading:M.value,onClick:O},{default:s(()=>[f(d(e(t)("Save")),1)]),_:1},8,["disabled","loading"])])]),default:s(()=>[u("div",_e,[a.type?(S(),B("div",ze,[u("div",{class:"cursor-pointer border transition hover:border-primary",onClick:h},[u("div",we,[u("img",{src:p.value,class:"h-10 w-10",alt:""},null,8,ke),u("div",null,[u("p",Ce,d(e(t)("Selected Type")),1),u("p",Se,d(a.type),1)])])]),u("div",Me,[l(e(V),null,{default:s(()=>[l(e(x),null,{default:s(()=>[f(d(e(t)("Name"))+" (A-Z,0-9,_)",1)]),_:1}),l(e(T),null,{default:s(()=>[l(e(k),{modelValue:a.name,"onUpdate:modelValue":r[0]||(r[0]=n=>a.name=n),placeholder:e(t)("Please enter name"),autocomplete:"off",onInput:y},null,8,["modelValue","placeholder"])]),_:1}),w.name?(S(),P(e(oe),{key:0,class:"text-destructive"},{default:s(()=>[f(d(w.name),1)]),_:1})):ee("",!0)]),_:1}),l(e(V),null,{default:s(()=>[l(e(x),null,{default:s(()=>[f(d(e(t)("Endpoint")),1)]),_:1}),l(e(T),null,{default:s(()=>[l(e(k),{modelValue:a.endpoint,"onUpdate:modelValue":r[1]||(r[1]=n=>a.endpoint=n),placeholder:e(t)("Please enter endpoint")},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),z.value?(S(),P(e(V),{key:0},{default:s(()=>[l(e(x),null,{default:s(()=>[f(d(e(t)("Credentials"))+" (JSON)",1)]),_:1}),l(e(T),null,{default:s(()=>[l(e(se),{modelValue:a.creds,"onUpdate:modelValue":r[2]||(r[2]=n=>a.creds=n),placeholder:e(t)("Please enter GCS credentials JSON"),autocomplete:"off",rows:6},null,8,["modelValue","placeholder"])]),_:1})]),_:1})):(S(),B(q,{key:1},[l(e(V),null,{default:s(()=>[l(e(x),null,{default:s(()=>[f(d(e(t)("Access Key")),1)]),_:1}),l(e(T),null,{default:s(()=>[l(e(k),{modelValue:a.accesskey,"onUpdate:modelValue":r[3]||(r[3]=n=>a.accesskey=n),placeholder:e(t)("Please enter Access Key"),autocomplete:"off"},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),l(e(V),null,{default:s(()=>[l(e(x),null,{default:s(()=>[f(d(e(t)("Secret Key")),1)]),_:1}),l(e(T),null,{default:s(()=>[l(e(k),{modelValue:a.secretkey,"onUpdate:modelValue":r[4]||(r[4]=n=>a.secretkey=n),type:"password",autocomplete:"off",placeholder:e(t)("Please enter Secret Key")},null,8,["modelValue","placeholder"])]),_:1})]),_:1})],64)),l(e(V),null,{default:s(()=>[l(e(x),null,{default:s(()=>[f(d(e(t)("Bucket")),1)]),_:1}),l(e(T),null,{default:s(()=>[l(e(k),{modelValue:a.bucket,"onUpdate:modelValue":r[5]||(r[5]=n=>a.bucket=n),placeholder:e(t)("Please enter bucket")},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),l(e(V),null,{default:s(()=>[l(e(x),null,{default:s(()=>[f(d(e(t)("Prefix")),1)]),_:1}),l(e(T),null,{default:s(()=>[l(e(k),{modelValue:a.prefix,"onUpdate:modelValue":r[6]||(r[6]=n=>a.prefix=n),placeholder:e(t)("Please enter prefix")},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),l(e(V),null,{default:s(()=>[l(e(x),null,{default:s(()=>[f(d(e(t)("Region")),1)]),_:1}),l(e(T),null,{default:s(()=>[l(e(k),{modelValue:a.region,"onUpdate:modelValue":r[7]||(r[7]=n=>a.region=n),placeholder:e(t)("Please enter region")},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),l(e(V),null,{default:s(()=>[l(e(x),null,{default:s(()=>[f(d(e(t)("Storage Class")),1)]),_:1}),l(e(T),null,{default:s(()=>[l(e(k),{modelValue:a.storageclass,"onUpdate:modelValue":r[8]||(r[8]=n=>a.storageclass=n),placeholder:e(t)("Please Enter storage class")},null,8,["modelValue","placeholder"])]),_:1})]),_:1})])])):(S(),B("div",he,[(S(),B(q,null,Y(b,n=>u("div",{key:n.value,class:"cursor-pointer border border-border/70 transition hover:border-primary",onClick:J=>_(n.value)},[u("div",be,[u("img",{src:n.iconUrl,class:"h-10 w-10",alt:""},null,8,xe),u("div",null,[u("p",Te,d(n.label),1),u("p",Ve,d(n.description),1)])])],8,ye)),64))]))])]),_:1},8,["modelValue","title"]))}}),Ue=Object.assign(Ke,{__name:"TiersNewForm"}),Fe={class:"space-y-4"},Pe={class:"flex justify-end gap-2"},Be=H({__name:"change-key",props:{visible:{type:Boolean},name:{}},emits:["update:visible","update:name","search"],setup(R,{emit:c}){const{t:g}=j(),t=G(),F=W(),v=R,b=c,m=E({get:()=>v.visible,set:_=>b("update:visible",_)}),M=E({get:()=>v.name,set:_=>b("update:name",_)}),p=Z({accessKey:"",secretKey:""}),a=C(!1);ae(()=>v.visible,_=>{_&&(p.accessKey="",p.secretKey="")});const z=()=>{b("update:visible",!1),a.value=!1,p.accessKey="",p.secretKey=""},w=async()=>{if(!p.accessKey||!p.secretKey){t.error(g("Please fill in the correct format"));return}a.value=!0;try{await F.updateTiers(v.name,{accessKey:p.accessKey,secretKey:p.secretKey}),t.success(g("Update Success")),b("search"),z()}catch(_){t.error(_?.message||g("Update Failed"))}finally{a.value=!1}};return(_,h)=>(S(),P(Q,{modelValue:m.value,"onUpdate:modelValue":h[3]||(h[3]=y=>m.value=y),title:e(g)("Update Key")+"ï¼š"+M.value,size:"md","close-on-backdrop":!1},{footer:s(()=>[u("div",Pe,[l(e(K),{variant:"outline",onClick:h[2]||(h[2]=y=>z())},{default:s(()=>[f(d(e(g)("Cancel")),1)]),_:1}),l(e(K),{variant:"default",loading:a.value,onClick:w},{default:s(()=>[f(d(e(g)("Submit")),1)]),_:1},8,["loading"])])]),default:s(()=>[u("div",Fe,[l(e(V),null,{default:s(()=>[l(e(x),null,{default:s(()=>[f(d(e(g)("Access Key")),1)]),_:1}),l(e(T),null,{default:s(()=>[l(e(k),{modelValue:p.accessKey,"onUpdate:modelValue":h[0]||(h[0]=y=>p.accessKey=y),placeholder:e(g)("Please enter Access Key"),autocomplete:"off"},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),l(e(V),null,{default:s(()=>[l(e(x),null,{default:s(()=>[f(d(e(g)("Secret Key")),1)]),_:1}),l(e(T),null,{default:s(()=>[l(e(k),{modelValue:p.secretKey,"onUpdate:modelValue":h[1]||(h[1]=y=>p.secretKey=y),type:"password",autocomplete:"off",placeholder:e(g)("Please enter Secret Key")},null,8,["modelValue","placeholder"])]),_:1})]),_:1})])]),_:1},8,["modelValue","title"]))}}),$e=Object.assign(Be,{__name:"TiersChangeKey"}),De={class:"text-2xl font-bold"},d0=H({__name:"index",setup(R){const{t:c}=j(),g=G(),t=le(),F=W(),v=C([]),b=C(!1),m=o=>{switch(o.type){case"rustfs":return o.rustfs;case"minio":return o.minio;case"s3":return o.s3;case"aliyun":return o.aliyun;case"tencent":return o.tencent;case"huaweicloud":return o.huaweicloud;case"azure":return o.azure;case"gcs":return o.gcs;case"r2":return o.r2;default:return}},M=[{header:()=>c("Tier Type"),accessorKey:"type",cell:({row:o})=>A("span",{class:"capitalize"},o.original.type||"-")},{id:"name",header:()=>c("Name"),accessorFn:o=>m(o)?.name||"-"},{id:"endpoint",header:()=>c("Endpoint"),accessorFn:o=>m(o)?.endpoint||"-"},{id:"bucket",header:()=>c("Bucket"),accessorFn:o=>m(o)?.bucket||"-"},{id:"prefix",header:()=>c("Prefix"),accessorFn:o=>m(o)?.prefix||"-"},{id:"region",header:()=>c("Region"),accessorFn:o=>m(o)?.region||"-"},{id:"actions",header:()=>c("Actions"),enableSorting:!1,cell:({row:o})=>A("div",{class:"flex items-centergap-2"},[A(K,{variant:"outline",size:"sm",onClick:()=>N(o.original)},()=>[A($,{name:"ri:key-2-line",class:"size-4"}),A("span",c("Update Key"))]),A(K,{variant:"outline",size:"sm",onClick:()=>I(o.original)},()=>[A($,{name:"ri:delete-bin-5-line",class:"size-4"}),A("span",c("Delete"))])])}],{table:p}=re({data:v,columns:M,getRowId:o=>`${o.type}-${m(o)?.name}`}),a=async()=>{b.value=!0;try{const o=await F.listTiers();v.value=o??[]}catch{v.value=[]}finally{b.value=!1}},z=async()=>{await a()};a();const w=C(),_=()=>w.value?.open(),h=C(),y=C(!1),U=C(""),N=o=>{U.value=m(o)?.name||"",y.value=!0},I=o=>{t.error({title:c("Warning"),content:c("Are you sure you want to delete this tier?"),positiveText:c("Confirm"),negativeText:c("Cancel"),onPositiveClick:()=>O(o)})},O=async o=>{try{await F.removeTiers(m(o)?.name||""),g.success(c("Delete Success")),z()}catch(i){g.error(i?.message||c("Delete Failed"))}};return(o,i)=>{const r=te,n=Ue,J=$e,X=ne;return S(),P(X,null,{default:s(()=>[l(r,null,{actions:s(()=>[l(e(K),{variant:"outline",onClick:_},{default:s(()=>[l(e($),{name:"ri:add-line",class:"size-4"}),u("span",null,d(e(c)("Add Tier")),1)]),_:1}),l(e(K),{variant:"outline",onClick:i[0]||(i[0]=()=>z())},{default:s(()=>[l(e($),{name:"ri:refresh-line",class:"size-4"}),u("span",null,d(e(c)("Refresh")),1)]),_:1})]),default:s(()=>[u("h1",De,d(e(c)("Tiers")),1)]),_:1}),l(ce,{table:e(p),"is-loading":b.value,"empty-title":e(c)("No Tiers"),"empty-description":e(c)("Add tiers to configure remote storage destinations.")},null,8,["table","is-loading","empty-title","empty-description"]),l(n,{ref_key:"newFormRef",ref:w,onSearch:i[1]||(i[1]=()=>z())},null,512),l(J,{ref_key:"changeKeyRef",ref:h,visible:y.value,"onUpdate:visible":i[2]||(i[2]=L=>y.value=L),name:U.value,"onUpdate:name":i[3]||(i[3]=L=>U.value=L),onSearch:i[4]||(i[4]=()=>z())},null,8,["visible","name"])]),_:1})}}});export{d0 as default};
